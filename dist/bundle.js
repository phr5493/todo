(()=>{"use strict";const t=t=>{const e=document.getElementById("projectContainer"),n=document.createElement("BUTTON");n.className="project",n.id=t,n.textContent=t,e.appendChild(n)},e=document.getElementById("taskContainer");function n(){for(;e.firstChild;)e.removeChild(e.firstChild)}class i{constructor(t){this.title=t,this.tasks=[]}}class o{constructor(t,e,n,i){this.title=t,this.description=e,this.dueDate=n,this.priority=i,this.subTasks=[]}}function c(t){let e;for(e in d)if(d[e].title==t)return e}function l(t,e){var n,i;n=e,i=t,document.getElementById(i).classList.remove("current"),document.getElementById(n).classList.add("current"),s=d[c(e)],window.localStorage.setItem("current",JSON.stringify(s))}let s,r,d=[];r=JSON.parse(window.localStorage.getItem("projects")),s=JSON.parse(window.localStorage.getItem("current")),null==r||null==s?(d[0]=new i("Default"),t("Default"),s=d[0],document.getElementById("Default").addEventListener("click",(function(){l(s.title,this.id)})),document.getElementById("Default").classList.add("current"),window.localStorage.setItem("projects",JSON.stringify(d))):function(e){let n;for(n in e)d[n]=new i(e[n].title),e[n].tasks,t(d[n].title),document.getElementById(d[n].title).addEventListener("click",(function(){l(s.title,this.id)}))}(r),document.getElementById(s.title).classList.add("current"),document.getElementById("addProject").addEventListener("click",(function(){let e=prompt("What is the name of your new project?");null!=e&&(""!=e?(d[d.length]=new i(e),t(e),document.getElementById(e).addEventListener("click",(function(){l(s.title,this.id)})),window.localStorage.setItem("projects",JSON.stringify(d))):alert("A valid name was not put in.\nPlease enter a valid name for the project."))})),document.getElementById("deleteProject").addEventListener("click",(function(){document.getElementById(s.title).removeEventListener("click",(function(){l(s.title,this.id)})),(t=>{alert(t),document.getElementById(t).remove()})(s.title),d.splice(c(s.title),1),s=d[0],document.getElementById(d[0].title).classList.add("current"),window.localStorage.setItem("projects",JSON.stringify(d)),window.localStorage.setItem("current",JSON.stringify(s))})),document.getElementById("addTask").addEventListener("click",(function(){((t,e)=>{var n;const i=document.getElementById("infoContainer"),o=document.createElement("FIELDSET");for(var c in o.id="inputForm",i.appendChild(o),t){n=t[c].toLowerCase();const i=document.createElement("LABEL");i.setAttribute("for",n),i.className="form",i.textContent=n.charAt(0).toUpperCase()+n.slice(1);const l=document.createElement("INPUT");l.setAttribute("type",e[c]),l.setAttribute("name",n),l.className="form",l.setId=n,o.appendChild(i),o.appendChild(l)}const l=document.createElement("BUTTON");l.className="form",l.id="submitBtn",l.textContent="Create new task",o.appendChild(l)})(["title","description","dueDate","priority"],["text","text","dateTime","number"]),document.getElementById("submitBtn").addEventListener("click",(function(){s.tasks[s.tasks.length()]=new o(document.querySelector("#title").value,document.querySelector("#description").value,document.querySelector("#dueDate").value,document.querySelector("#priority").value),(t=>{const e=document.getElementById("taskContainer");n();const i=document.createElement("BUTTON");i.className="task",i.id=task.title,i.textContent=title,e.appendChild(i)})(s.tasks[s.tasks])}))}))})();